<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Nodesmith Modules</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="features.html">Features</a>
    <a href="getting-started.html">Getting Started</a>
    <a href="architecture.html">Architecture</a>
    <a href="modules.html">Modules</a>
    <a href="events.html">Events</a>
    <a href="di.html">DI</a>
    <a href="auto-discovery.html">Auto-Discovery</a>
    <a href="faq.html">FAQ</a>
  </nav>
  <div class="container">
    <h1>ğŸ“¦ Modules</h1>
    <p>
      Modules are the building blocks of Nodesmith applications. Each module is self-contained with its own routes, 
      events, services, and business logic. The framework automatically discovers and registers all components.
    </p>

    <h2>ğŸš€ Auto-Discovery Module Structure</h2>
    <p>Each module follows this consistent structure:</p>
    <pre><code>modules/your-module/
â”œâ”€â”€ routes/          # HTTP routes (auto-registered)
â”‚   â”œâ”€â”€ userRoutes.ts
â”‚   â”œâ”€â”€ profileRoutes.ts
â”‚   â””â”€â”€ Routes.ts
â”œâ”€â”€ events/          # Event handlers (auto-registered)
â”‚   â”œâ”€â”€ userEvents.ts
â”‚   â””â”€â”€ Events.ts
â”œâ”€â”€ services/        # Business logic (auto-registered in DI)
â”‚   â”œâ”€â”€ UserService.ts
â”‚   â””â”€â”€ EmailService.ts
â”œâ”€â”€ middleware/      # Custom middleware (auto-discovered)
â”œâ”€â”€ types/           # TypeScript types (auto-discovered)
â”œâ”€â”€ models/          # Database schemas (handled by db:migrate)
â”œâ”€â”€ tests/           # Unit and integration tests
â”œâ”€â”€ docs/            # Module documentation
â”œâ”€â”€ config/          # Module configuration
â”œâ”€â”€ utils/           # Utility functions
â””â”€â”€ module.json      # Module manifest
</code></pre>

    <h2>ğŸ¯ Auto-Discovery Patterns</h2>
    
    <h3>Routes Auto-Discovery</h3>
    <p>Create route files in the <code>routes/</code> folder:</p>
    <pre><code>// routes/userRoutes.ts
export function register(app: any) {
  app.get('/users', (req, res) => {
    res.json({ users: [] });
  });
  
  app.post('/users', (req, res) => {
    res.status(201).json({ message: 'User created' });
  });
}</code></pre>

    <h3>Express Router Pattern</h3>
    <pre><code>// routes/profileRoutes.ts
import { Router } from 'express';

const router = Router();

router.get('/', (req, res) => {
  res.json({ profile: {} });
});

router.put('/', (req, res) => {
  res.json({ message: 'Profile updated' });
});

export default router;</code></pre>

    <h3>Events Auto-Discovery</h3>
    <pre><code>// events/userEvents.ts
export function register(eventBus: any) {
  eventBus.on('user.created', (user) => {
    console.log('User created:', user);
  });
  
  eventBus.on('user.updated', (user) => {
    console.log('User updated:', user);
  });
}</code></pre>

    <h3>Services Auto-Discovery</h3>
    <pre><code>// services/UserService.ts
export class UserService {
  async createUser(userData: any) {
    // Business logic here
    return user;
  }
  
  async getUserById(id: number) {
    // Business logic here
    return user;
  }
}</code></pre>

    <h2>ğŸ“‹ Module Manifest</h2>
    <p>Each module has a <code>module.json</code> manifest:</p>
    <pre><code>{
  "name": "user",
  "version": "1.0.0",
  "description": "User management module",
  "author": "Your Name",
  "dependencies": ["email"],
  "migrations": ["migrations/001_create_users.sql"]
}
</code></pre>

    <h2>ğŸ” Discovery Commands</h2>
    <p>Use the CLI to explore your modules:</p>
    <pre><code># List all modules
npm run cli module:list

# Show detailed module info
npm run cli module:info user

# Discover all components
npm run cli module:discover

# Create a new module
npm run cli module:create mymodule</code></pre>

    <h2>âœ¨ Benefits of Auto-Discovery</h2>
    <ul>
      <li><strong>Zero Configuration:</strong> No manual registration needed</li>
      <li><strong>Consistent Structure:</strong> All modules follow the same pattern</li>
      <li><strong>Easy to Add:</strong> Just drop files in folders</li>
      <li><strong>Discoverable:</strong> CLI tools show what's available</li>
      <li><strong>Flexible:</strong> Supports multiple patterns and approaches</li>
    </ul>

    <h2>ğŸ“š Next Steps</h2>
    <p>
      <a href="auto-discovery.html" style="color:#00b894;font-weight:bold;">Learn About Auto-Discovery &rarr;</a>
      <a href="events.html" style="color:#00b894;font-weight:bold;">Explore Events &rarr;</a>
      <a href="di.html" style="color:#00b894;font-weight:bold;">Dependency Injection &rarr;</a>
    </p>
  </div>
</body>
</html> 