<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Auto-Discovery | Nodesmith</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="features.html">Features</a>
    <a href="getting-started.html">Getting Started</a>
    <a href="architecture.html">Architecture</a>
    <a href="modules.html">Modules</a>
    <a href="events.html">Events</a>
    <a href="di.html">DI</a>
    <a href="auto-discovery.html">Auto-Discovery</a>
    <a href="faq.html">FAQ</a>
  </nav>
  <div class="container">
    <h1>🚀 Auto-Discovery System</h1>
    <p>
      Nodesmith's auto-discovery system automatically finds and registers components based on your module's folder structure. 
      No manual registration required - just drop files in the right folders!
    </p>

    <h2>How It Works</h2>
    <p>
      When your application starts, Nodesmith scans each module's folders and automatically:
    </p>
    <ul>
      <li>Discovers and registers event handlers</li>
      <li>Finds and mounts HTTP routes</li>
      <li>Registers services in the DI container</li>
      <li>Collects middleware and types</li>
    </ul>

    <h2>📁 Folder Structure</h2>
    <p>Each module follows this consistent structure:</p>
    <pre><code>modules/your-module/
├── routes/          # HTTP routes (auto-registered)
├── events/          # Event handlers (auto-registered)
├── services/        # Business logic (auto-registered in DI)
├── middleware/      # Custom middleware (auto-discovered)
├── types/           # TypeScript types (auto-discovered)
├── models/          # Database schemas (handled by db:migrate)
├── tests/           # Unit and integration tests
├── docs/            # Module documentation
├── config/          # Module configuration
├── utils/           # Utility functions
└── module.json      # Module manifest
</code></pre>

    <h2>🎯 Auto-Discovery Patterns</h2>
    
    <h3>Routes Auto-Discovery</h3>
    <p>Create route files in the <code>routes/</code> folder:</p>
    <pre><code>// routes/userRoutes.ts
export function register(app: any) {
  app.get('/users', (req, res) => {
    res.json({ users: [] });
  });
}

// routes/profileRoutes.ts
import { Router } from 'express';
const router = Router();
router.get('/', (req, res) => res.json({ profile: {} }));
export default router;</code></pre>

    <h3>Events Auto-Discovery</h3>
    <p>Create event files in the <code>events/</code> folder:</p>
    <pre><code>// events/userEvents.ts
export function register(eventBus: any) {
  eventBus.on('user.created', (user) => {
    console.log('User created:', user);
  });
}</code></pre>

    <h3>Services Auto-Discovery</h3>
    <p>Create service files in the <code>services/</code> folder:</p>
    <pre><code>// services/UserService.ts
export class UserService {
  async createUser(userData: any) {
    // Business logic here
    return user;
  }
}</code></pre>

    <h2>🔍 Discovery Commands</h2>
    <p>Use the CLI to see what components are discovered:</p>
    <pre><code>npm run cli module:discover</code></pre>
    <p>This shows a detailed report of all discovered components across all modules.</p>

    <h2>✨ Benefits</h2>
    <ul>
      <li><strong>Zero Configuration:</strong> No manual registration needed</li>
      <li><strong>Consistent Structure:</strong> All modules follow the same pattern</li>
      <li><strong>Easy to Add:</strong> Just drop files in folders</li>
      <li><strong>Discoverable:</strong> CLI tools show what's available</li>
      <li><strong>Flexible:</strong> Supports multiple patterns and approaches</li>
    </ul>

    <h2>🚏 Migration from Manual Registration</h2>
    <p>If you have existing modules with manual registration in <code>index.ts</code>:</p>
    <ol>
      <li>Move routes from <code>index.ts</code> to <code>routes/</code> folder files</li>
      <li>Move events from <code>index.ts</code> to <code>events/</code> folder files</li>
      <li>Move services to <code>services/</code> folder files</li>
      <li>Remove <code>index.ts</code> and <code>entry</code> fields from <code>module.json</code></li>
      <li>The framework will auto-discover everything!</li>
    </ol>

    <h2>📚 Next Steps</h2>
    <p>
      <a href="modules.html" style="color:#00b894;font-weight:bold;">Learn about Modules &rarr;</a>
      <a href="events.html" style="color:#00b894;font-weight:bold;">Explore Events &rarr;</a>
      <a href="di.html" style="color:#00b894;font-weight:bold;">Dependency Injection &rarr;</a>
    </p>
  </div>
</body>
</html> 